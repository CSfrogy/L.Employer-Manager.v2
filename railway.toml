[build]
builder = "dockerfile"
buildCommand = "docker build -t laravel-app ."
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "docker run -p $PORT:8080 laravel-app"
healthcheckPath = "/"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[[services]]
name = "laravel-app"
source = "."
builder = "dockerfile"
dockerfilePath = "Dockerfile"

[environments.production]
variables = [
    "APP_ENV=production",
    "APP_DEBUG=false",
    "RUN_MIGRATIONS=true",
    "SEED=false"
]
